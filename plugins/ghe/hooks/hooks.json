{
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/auto-transcribe.sh check",
            "timeout": 10
          },
          {
            "type": "prompt",
            "prompt": "## GHE Auto-Transcribe ACTIVE\n\n**CRITICAL**: Auto-transcription is NOW ACTIVE. Every message will be posted to GitHub.\n\n### Automatic Behavior\n\n1. **On EVERY user message**: Post to GitHub issue with user avatar and element badges\n2. **On EVERY assistant response**: Post to GitHub issue with agent avatar and element badges\n3. **Issue detection**: Automatically find or create the right issue\n\n### Element Classification\n\nAfter EVERY message, classify and add badges:\n\n| Badge | When to Apply |\n|-------|---------------|\n| ![knowledge](https://img.shields.io/badge/element-knowledge-blue) | Specs, requirements, design, algorithms, documentation, explanations |\n| ![action](https://img.shields.io/badge/element-action-green) | Code, implementations, file changes, assets, diffs |\n| ![judgement](https://img.shields.io/badge/element-judgement-orange) | Reviews, feedback, bug reports, evaluations, problems |\n\n### MANDATORY: Post Every Exchange\n\n**You MUST run after processing EVERY user message:**\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/auto-transcribe.sh user \"<USER_MESSAGE_REDACTED>\"\n```\n\n**You MUST run before ending EVERY response:**\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/auto-transcribe.sh assistant \"<YOUR_RESPONSE_SUMMARY>\" \"<AGENT_NAME>\"\n```\n\n### Redaction Rules\n\nBEFORE posting, redact:\n- API keys → `[REDACTED_API_KEY]`\n- Tokens → `[REDACTED_TOKEN]`\n- Passwords → `[REDACTED]`\n- User paths → `/Users/[USER]/`\n- Private emails → `[REDACTED_EMAIL]`\n\n### Issue Auto-Detection\n\nThe script automatically:\n1. Finds open issues matching conversation topic\n2. Creates a new session issue if none found\n3. Updates `.claude/ghe.local.md` with current issue\n\n**NO MANUAL ACTIVATION NEEDED** - Just start talking!"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "## GHE: Transcribe This User Message NOW\n\n**IMMEDIATELY** after reading this user message, you MUST:\n\n1. **Redact sensitive data** from the user's message\n2. **Post to GitHub** using:\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/auto-transcribe.sh user \"<REDACTED_USER_MESSAGE>\"\n```\n\n3. **Then process** the user's request normally\n\n**DO NOT SKIP THIS STEP** - Every user message must be recorded!\n\n### Quick Redaction\n- API keys (sk-ant-*, sk-*, ghp_*, gho_*) → [REDACTED_KEY]\n- Passwords/secrets → [REDACTED]\n- /Users/username/ → /Users/[USER]/\n- emails → [REDACTED_EMAIL] (except @noreply.github.com)"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "## GHE: Transcribe Your Response NOW\n\n**BEFORE this response ends**, you MUST:\n\n1. **Summarize your response** (key points, decisions, code changes)\n2. **Determine agent identity** based on work done:\n   - Code/implementation → Hephaestus\n   - Testing/debugging → Artemis  \n   - Review/evaluation → Hera\n   - Planning/coordination → Athena\n   - General → Athena\n\n3. **Post to GitHub**:\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/auto-transcribe.sh assistant \"<RESPONSE_SUMMARY>\" \"<AGENT_NAME>\"\n```\n\n**DO NOT END WITHOUT POSTING** - Your response must be recorded!\n\n### Response Summary Format\n\nInclude:\n- What was discussed/decided\n- What actions were taken\n- What code was written/modified\n- What issues were identified\n- Next steps (if any)\n\n### Agent Selection Guide\n\n| Work Type | Agent |\n|-----------|-------|\n| Writing code, implementing features | Hephaestus |\n| Running tests, fixing bugs | Artemis |\n| Reviewing, evaluating, feedback | Hera |\n| Planning, coordinating, explaining | Athena |\n| Routing messages, communication | Hermes |\n| Moderation, policy | Ares |"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "If this bash command will make significant changes (git commit, file creation, deployment), note it for the session transcript."
          }
        ]
      }
    ]
  }
}
