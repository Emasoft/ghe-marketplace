{
  "hooks": [
    {
      "event": "SessionStart",
      "type": "prompt",
      "prompt": "## GitHub Elements Context Loader\n\n### Step 0: Check Plugin Settings\n\nFirst, check if GitHub Elements is configured for this project:\n\n1. **Look for settings file**: `.claude/github-elements.local.md`\n2. **If not found**: Plugin is using defaults (enabled, standard enforcement)\n3. **If found**: Parse YAML frontmatter to get settings:\n   - `enabled`: If false, skip all GitHub Elements features\n   - `enforcement_level`: strict/standard/lenient\n   - `serena_sync`: Whether to sync with SERENA memory bank\n   - `notification_level`: verbose/normal/quiet\n   - `auto_worktree`: Whether to auto-create git worktrees\n\n**Quick exit if disabled**: If `enabled: false`, skip remaining steps.\n\n### Step 1: Check for Active Work (if enabled)\n\n1. **Check for in-progress issues assigned to @me**:\n   - Run: `gh issue list --assignee @me --label \"in-progress\" --json number,title,labels,updatedAt`\n   - If found, this is your active thread\n\n2. **If active thread found**:\n   - Identify thread type from labels (type:dev, type:test, type:review)\n   - Read the last checkpoint: `gh issue view $ISSUE --comments`\n   - Parse the last State Snapshot to understand current state\n   - Load the skill: `github-elements-tracking`\n   - Report to user (verbosity based on notification_level setting)\n\n3. **If no active thread**:\n   - Check for ready threads: `gh issue list --label \"ready\" --no-assignee`\n   - Report available work to user\n\n### Step 2: SERENA Memory Bank (if serena_sync enabled)\n\n4. **Check SERENA memory bank** (only if `serena_sync: true`):\n   - Read `.serena/memories/activeContext.md` for context\n   - Verify consistency with GitHub state\n   - Report any discrepancies\n\n### Step 3: Report Context Summary\n\n5. **Report based on notification_level**:\n   - **verbose**: Full details of active thread, available work, all settings\n   - **normal**: Active thread summary, available count, warnings only\n   - **quiet**: Only errors and critical warnings\n\nThis ensures continuity across sessions while respecting user preferences."
    }
  ]
}
